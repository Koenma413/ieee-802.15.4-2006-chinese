# 7.1 MAC 数据服务

　　MAC 层公共子层-服务接入点（MCPS-SAP）支持在对等的服务协议汇聚层（SSCS）实体之间传输服务协议汇聚层的协议数据单元（SPDU）。

　　表 40 列出了 MAC 层公共子层-服务接入点所支持的原语。标有符号(♦)的原
语对简化功能设备来说是可选的。这些原语在表中提及的章节进行详细描述。

## 7.1.1.1 MCPS-DATA.request 原语
MCPS-DATA.request 用来请求从本地 MCA 层公共子层实体向对等连接设备的 MAC
层公共子层实体发送一个 SSCS 协议数据单元 SPDU (即 MAC 层服务数据单元 MSDU)。
###7.1.1.1.1 服务原语的语义
MCPS-DATA.request 原语的语义如下：
```
MCPS-DATA.request (
                  SrcAddrMode,
                  DstAddrMode,
                  DstPANId,
                  DstAddr,
                  msduLength,
                  msdu,
                  msduHandle,
                  TxOptions,
                  SecurityLevel,
                  KeyIdMode,
                  KeySource,
                  KeyIndex
                  )
```
　　表41 描述了 MCPS-DATA.request 原语中的参数。

<center>表41 MCPS-DATA.request 原语的参数</center>

名称 | 类型 | 变化范围 | 描述
-----|------|------- | ------
SrcAddrMode | 整型 | 0x00–0x03 | 该原语和随后的MPDU的源地址模式：<br>0x00 = 无地址（地址字段被省略，详见7.2.1.1.8）<br>0x01 = 保留<br>0x02 = 16bit短地址 <br> 0x03 = 64bit扩展地址
DstAddrMode | 整型 | 0x00–0x03 |该原语和随后的MPDU的目标地址模式：<br>0x00 = 无地址（地址字段被省略，详见7.2.1.1.6）<br>0x01 = 保留<br>0x02 = 16bit短地址 <br> 0x03 = 64bit扩展地址
DstPANId | 整型 | 0x0000-0xffff | MAC服务数据单元将要发送到的实体的16bit PAN标识符
DstAddr | 设备地址 | 参数DstAddrMode所指定的 | MAC服务数据单元将要送到的设备的地址
msduLength | 整型 | ≤ aMaxMACPayloadSize | MAC字层实体将要传输的服务数据单元中包含的字节数
msdu | Set of octets | —— | MAC字层实体将要传输的服务数据单元的set of octets
msduHandle | 整型 | 0x00-0xff | MAC子层实体将要传输的服务数据单元
TxOptions | Bitmap | 3bit的范围 | MAC服务数据单元的传输选项<br>对于b0，1 = 被确认的传输；<br>　　　　　0 = 未被确认的传输<br>对于b1,　1 = GTS传输；<br>　　　　　0 = 信标模式的PAN中的CAP传输<br>对于b2,　1 = 间接传输；<br>　　　　　0 = 直接传输<br>对于非信标模式的PAN，比特b1总被设为0
SecurityLevel | 整型 | 0x00-0x07 | 使用的安全等级（看7.6.2.2.1中的表95）
KeyIdMode | 整型 | 0x00-0x03 |由于表示密钥的模式（看7.6.2.2.2中的表96）。如果参数SecurityLevel被设为0，改参数将被忽略
KeySource | Set of 0,4, or 8 octets | 由参数KeyIdMOde指定 |密钥的源。如果参数SecurityLevel被设为0，改参数将被忽略
KeyIndex | 整型 | 0x01-0xff | 密钥的索引。如果参数SecurityLevel被设为0，改参数将被忽略
